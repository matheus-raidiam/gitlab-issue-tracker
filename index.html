<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>GitLab Issues SLA Dashboard</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="container header">
    <div style="display:flex;align-items:center;gap:10px">
      <img src="Raidiam_icon.png" alt="Raidiam Logo" style="height:32px;width:32px"/>
      <h1>GitLab Issues SLA Dashboard</h1>
    </div>
  </header>

  <p class="container page-intro">
    This dashboard pulls issues from our GitLab projects (Open Finance & Open Insurance) and gives the Service team a quick view of SLA risk, activity, and context.
    It calculates <strong>working days</strong> and applies SLAs based on tags (Nature/Phase/Platform/Product/Status). Use filters, sorting, and local notes to triage faster.
  </p>

  <!-- Toolbar -->
  <div class="container controls" style="margin-bottom:12px">
    <div class="control">
      <label for="viewSelect" style="font-weight:600">View</label>
      <select id="viewSelect">
        <option value="open" selected>Open issues</option>
        <option value="closed7">Closed (last 7 days)</option>
      </select>
    </div>
    <button id="refreshBtn" class="btn">Refresh</button>
    <button id="clearNotesBtn" class="btn btn-danger">Clear All Comments</button>
    <button id="resetFiltersBtn" class="btn btn-outline">Reset Filters</button>
  </div>

  <!-- Filters (chips) -->
  <div class="container table-wrap" style="padding:12px">
    <div class="control">
      <label>Nature</label>
      <div id="natureChips" class="chips"></div>
    </div>
    <div class="control" style="margin-top:10px">
      <label>Phase</label>
      <div id="phaseChips" class="chips"></div>
    </div>
    <div class="control" style="margin-top:10px">
      <label>Platform</label>
      <div id="platformChips" class="chips"></div>
    </div>
    <div class="control" style="margin-top:10px">
      <label>Product</label>
      <div id="productChips" class="chips"></div>
    </div>
    <div class="control" style="margin-top:10px">
      <label>Status</label>
      <div id="statusChips" class="chips"></div>
    </div>
  </div>

  <main class="container">
    <section id="financeSection" class="section">
      <div class="section-head">
        <h2>
          Open Finance Issues
          <a id="financeLink" class="section-link" target="_blank" rel="noreferrer">(view in GitLab)</a>
        </h2>
        <div class="summary" id="financeSummary"></div>
      </div>
      <div id="financeEmpty" class="empty hidden"></div>
      <div class="table-wrap">
        <table class="tbl" id="financeTable">
          <thead>
            <tr>
              <th data-sort="iid">ID</th>
              <th data-sort="title">Title</th>
              <th data-sort="created_at">Created</th>
              <th data-sort="wdays">Working Days</th>
              <th data-sort="sla">SLA Status</th>
              <th>Nature</th>
              <th>Phase</th>
              <th>Platform</th>
              <th>Product</th>
              <th>Status</th>
              <th>Comments</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <section id="insuranceSection" class="section">
      <div class="section-head">
        <h2>
          Open Insurance Issues
          <a id="insuranceLink" class="section-link" target="_blank" rel="noreferrer">(view in GitLab)</a>
        </h2>
        <div class="summary" id="insuranceSummary"></div>
      </div>
      <div id="insuranceEmpty" class="empty hidden"></div>
      <div class="table-wrap">
        <table class="tbl" id="insuranceTable">
          <thead>
            <tr>
              <th data-sort="iid">ID</th>
              <th data-sort="title">Title</th>
              <th data-sort="created_at">Created</th>
              <th data-sort="wdays">Working Days</th>
              <th data-sort="sla">SLA Status</th>
              <th>Nature</th>
              <th>Phase</th>
              <th>Platform</th>
              <th>Product</th>
              <th>Status</th>
              <th>Comments</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>
  </main>

  <footer class="container footer">
    <small>Public data via GitLab REST API â€¢ Comments are stored locally in your browser</small>
  </footer>

  <script src="script.js"></script>
</body>
</html>
